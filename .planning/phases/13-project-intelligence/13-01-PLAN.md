# Plan 13-01: Registry Client

**Phase:** 13 -- Project Intelligence
**Goal:** Create a cached SSH-based client for the project registry on agent1

## Tasks

1. **Define TypeScript interfaces** for RegistryProject and Registry
   - id, name, path, node, type, markers, lastModified, description, status, version, notFoundCount
   - Registry wraps projects array with version, lastUpdated, lastScan metadata

2. **Implement SSH fetch** with JSON parsing
   - `cat /opt/cluster-agents/file-organizer/data/registry.json` on agent1 (192.168.1.61)
   - 15s SSH timeout
   - Parse JSON, validate `projects` array exists

3. **Implement 5-minute TTL cache**
   - In-memory cache with timestamp
   - Return stale cache on SSH failure (graceful degradation)
   - `forceRefresh` parameter to bypass cache

4. **Implement accessor methods**
   - `getProjects()` -- all active projects, sorted alphabetically
   - `getProjectByName(name)` -- case-insensitive lookup
   - `getProjectsByNode(nodeName)` -- filter by node
   - `searchProjects(query)` -- substring match on name/description/type
   - `resolveProject(name)` -- returns node + path, throws if not found

## File

- `src/clients/registry.ts` (new)

## Dependencies

- Existing SSH client (`src/clients/ssh.ts` -- `execOnNode()`)
- No new npm dependencies

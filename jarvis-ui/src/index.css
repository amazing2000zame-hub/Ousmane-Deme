@import "tailwindcss";
@import "@xterm/xterm/css/xterm.css";

@theme {
  /* --- Amber/Gold Palette (WCAG AA verified on #0a0a0f) --- */
  --color-jarvis-amber: #ffb800;          /* Primary accent: 11.2:1 contrast */
  --color-jarvis-gold: #ffd866;           /* Secondary accent: 14.8:1 contrast */
  --color-jarvis-amber-dim: #b38200;      /* Dimmed amber: 7.2:1 contrast */
  --color-jarvis-orange: #ff6b00;         /* Alert/warning: 6.5:1 contrast */
  --color-jarvis-red: #ff3333;            /* Error/critical: 5.2:1 contrast */
  --color-jarvis-green: #33ff88;          /* Success/online: 12.4:1 contrast */
  --color-jarvis-cyan: #00d4ff;           /* Info/links: 9.8:1 contrast */

  /* --- Background Layers --- */
  --color-jarvis-bg: #0a0a0f;            /* Deepest background */
  --color-jarvis-bg-panel: #0d0d14;      /* Panel background */
  --color-jarvis-bg-card: #111118;       /* Card background */
  --color-jarvis-bg-hover: #16161f;      /* Hover state */

  /* --- Text --- */
  --color-jarvis-text: #e8e0d0;          /* Primary text (warm white): 15.1:1 */
  --color-jarvis-text-dim: #7a7060;      /* Secondary text: 4.7:1 (AA) */
  --color-jarvis-text-muted: #4a4540;    /* Muted text: 3.1:1 (large text only) */

  /* --- Semantic Colors (PERF-024) --- */
  --color-jarvis-provider-claude: #D4A574;
  --color-jarvis-provider-qwen: #00D9FF;
  --color-jarvis-bar-active: rgba(255, 176, 0, 1);
  --color-jarvis-bar-glow: rgba(255, 176, 0, 0.5);
  --color-jarvis-bar-idle: rgba(255, 176, 0, 0.2);
  --color-jarvis-budget-ok: #22d3ee;
  --color-jarvis-budget-exceeded: #f87171;

  /* --- Glow Shadows (PERF-026: standardized intensities) --- */
  --shadow-jarvis-glow: 0 0 15px rgba(255, 184, 0, 0.4), 0 0 30px rgba(255, 184, 0, 0.2);
  --shadow-jarvis-glow-sm: 0 0 8px rgba(255, 184, 0, 0.3);
  --shadow-jarvis-glow-xs: 0 0 4px rgba(255, 184, 0, 0.2);
  --shadow-jarvis-glow-cyan: 0 0 15px rgba(0, 212, 255, 0.4);
  --shadow-jarvis-glow-cyan-sm: 0 0 8px rgba(0, 212, 255, 0.3);
  --shadow-jarvis-glow-cyan-xs: 0 0 4px rgba(0, 212, 255, 0.2);
  --shadow-jarvis-glow-green: 0 0 15px rgba(51, 255, 136, 0.4);
  --shadow-jarvis-glow-green-sm: 0 0 8px rgba(51, 255, 136, 0.3);
  --shadow-jarvis-glow-green-xs: 0 0 4px rgba(51, 255, 136, 0.2);
  --shadow-jarvis-glow-red: 0 0 15px rgba(255, 51, 51, 0.4);
  --shadow-jarvis-glow-red-sm: 0 0 8px rgba(255, 51, 51, 0.3);
  --shadow-jarvis-glow-red-xs: 0 0 4px rgba(255, 51, 51, 0.2);
  --shadow-jarvis-glow-orange: 0 0 12px rgba(255, 107, 0, 0.3);

  /* --- Fonts --- */
  --font-display: 'Orbitron', sans-serif;
  --font-body: 'Rajdhani', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;

  /* --- Animations --- */
  --animate-pulse-glow: pulse-glow 2s ease-in-out infinite;
  --animate-data-pulse: data-pulse 1.5s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

@keyframes data-pulse {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.02); }
}

@keyframes scanSweep {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

@keyframes gridDrift {
  0% { transform: translate(0, 0); }
  25% { transform: translate(12px, 8px); }
  50% { transform: translate(6px, 16px); }
  75% { transform: translate(-6px, 10px); }
  100% { transform: translate(0, 0); }
}

@keyframes dataPulseHeart {
  0%, 100% { opacity: 0.7; transform: rotate(45deg) scale(1); }
  50% { opacity: 1; transform: rotate(45deg) scale(1.15); }
}

@keyframes globeSpin {
  from { transform: rotateX(-15deg) rotateY(0deg); }
  to   { transform: rotateX(-15deg) rotateY(360deg); }
}

@keyframes globeSpinSlow {
  from { transform: rotateX(-10deg) rotateY(0deg); }
  to   { transform: rotateX(-10deg) rotateY(360deg); }
}

@keyframes orbit {
  from { transform: rotate(0deg) translateX(var(--orbit-radius, 120px)) rotate(0deg); }
  to   { transform: rotate(360deg) translateX(var(--orbit-radius, 120px)) rotate(-360deg); }
}

@keyframes ringPulse {
  0%, 100% { opacity: 0.15; }
  50% { opacity: 0.35; }
}

/* --- Base Styles --- */
html, body, #root {
  height: 100%;
  width: 100%;
  overflow: hidden;
}

body {
  font-family: var(--font-body);
  background-color: var(--color-jarvis-bg);
  color: var(--color-jarvis-text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ======================================================
   COLOR THEMES — override accent, glow, and tint per theme
   Default (no data-theme) = Amber/Gold
   ====================================================== */

/* --- Cyan / Teal (eDEX-UI / TRON) --- */
[data-theme="cyan"] {
  --color-jarvis-amber: #00d4ff;
  --color-jarvis-gold: #66e8ff;
  --color-jarvis-amber-dim: #0098b8;
  --color-jarvis-bg: #060a0f;
  --color-jarvis-bg-panel: #080d14;
  --color-jarvis-bg-card: #0a1118;
  --color-jarvis-bg-hover: #0e161f;
  --color-jarvis-text: #d0e0e8;
  --color-jarvis-text-dim: #607a7a;
  --color-jarvis-text-muted: #404a4a;
  --color-jarvis-cyan: #ffb800;          /* swap — info uses amber when primary is cyan */
  --color-jarvis-bar-active: rgba(0, 212, 255, 1);
  --color-jarvis-bar-glow: rgba(0, 212, 255, 0.5);
  --color-jarvis-bar-idle: rgba(0, 212, 255, 0.2);
  --shadow-jarvis-glow: 0 0 15px rgba(0, 212, 255, 0.4), 0 0 30px rgba(0, 212, 255, 0.2);
  --shadow-jarvis-glow-sm: 0 0 8px rgba(0, 212, 255, 0.3);
  --shadow-jarvis-glow-xs: 0 0 4px rgba(0, 212, 255, 0.2);
  --shadow-jarvis-glow-cyan: 0 0 15px rgba(255, 184, 0, 0.4);
}

/* --- Green / Emerald (Matrix) --- */
[data-theme="green"] {
  --color-jarvis-amber: #33ff88;
  --color-jarvis-gold: #88ffbb;
  --color-jarvis-amber-dim: #22b35e;
  --color-jarvis-bg: #060f0a;
  --color-jarvis-bg-panel: #081008;
  --color-jarvis-bg-card: #0a1410;
  --color-jarvis-bg-hover: #0e1a14;
  --color-jarvis-text: #d0e8d8;
  --color-jarvis-text-dim: #607a66;
  --color-jarvis-text-muted: #404a42;
  --color-jarvis-green: #00d4ff;          /* swap — success uses cyan when primary is green */
  --color-jarvis-bar-active: rgba(51, 255, 136, 1);
  --color-jarvis-bar-glow: rgba(51, 255, 136, 0.5);
  --color-jarvis-bar-idle: rgba(51, 255, 136, 0.2);
  --shadow-jarvis-glow: 0 0 15px rgba(51, 255, 136, 0.4), 0 0 30px rgba(51, 255, 136, 0.2);
  --shadow-jarvis-glow-sm: 0 0 8px rgba(51, 255, 136, 0.3);
  --shadow-jarvis-glow-xs: 0 0 4px rgba(51, 255, 136, 0.2);
  --shadow-jarvis-glow-cyan: 0 0 15px rgba(0, 212, 255, 0.4);
}

/* --- Purple / Violet (Cyberpunk) --- */
[data-theme="purple"] {
  --color-jarvis-amber: #b366ff;
  --color-jarvis-gold: #d4a0ff;
  --color-jarvis-amber-dim: #7a3db3;
  --color-jarvis-bg: #0a060f;
  --color-jarvis-bg-panel: #0d0814;
  --color-jarvis-bg-card: #110a18;
  --color-jarvis-bg-hover: #160e1f;
  --color-jarvis-text: #e0d0e8;
  --color-jarvis-text-dim: #7a6080;
  --color-jarvis-text-muted: #4a4050;
  --color-jarvis-bar-active: rgba(179, 102, 255, 1);
  --color-jarvis-bar-glow: rgba(179, 102, 255, 0.5);
  --color-jarvis-bar-idle: rgba(179, 102, 255, 0.2);
  --shadow-jarvis-glow: 0 0 15px rgba(179, 102, 255, 0.4), 0 0 30px rgba(179, 102, 255, 0.2);
  --shadow-jarvis-glow-sm: 0 0 8px rgba(179, 102, 255, 0.3);
  --shadow-jarvis-glow-xs: 0 0 4px rgba(179, 102, 255, 0.2);
  --shadow-jarvis-glow-cyan: 0 0 15px rgba(0, 212, 255, 0.4);
}

/* --- Red / Crimson (Military HUD) --- */
[data-theme="red"] {
  --color-jarvis-amber: #ff3333;
  --color-jarvis-gold: #ff6666;
  --color-jarvis-amber-dim: #b32222;
  --color-jarvis-orange: #ff8800;
  --color-jarvis-bg: #0f0606;
  --color-jarvis-bg-panel: #140808;
  --color-jarvis-bg-card: #180a0a;
  --color-jarvis-bg-hover: #1f0e0e;
  --color-jarvis-text: #e8d0d0;
  --color-jarvis-text-dim: #7a6060;
  --color-jarvis-text-muted: #4a4040;
  --color-jarvis-red: #ff8800;            /* swap — error uses orange when primary is red */
  --color-jarvis-bar-active: rgba(255, 51, 51, 1);
  --color-jarvis-bar-glow: rgba(255, 51, 51, 0.5);
  --color-jarvis-bar-idle: rgba(255, 51, 51, 0.2);
  --shadow-jarvis-glow: 0 0 15px rgba(255, 51, 51, 0.4), 0 0 30px rgba(255, 51, 51, 0.2);
  --shadow-jarvis-glow-sm: 0 0 8px rgba(255, 51, 51, 0.3);
  --shadow-jarvis-glow-xs: 0 0 4px rgba(255, 51, 51, 0.2);
  --shadow-jarvis-glow-cyan: 0 0 15px rgba(0, 212, 255, 0.4);
}

/* --- Custom Scrollbar (theme-aware via currentColor trick) --- */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: color-mix(in srgb, var(--color-jarvis-amber) 20%, transparent); border-radius: 2px; }
::-webkit-scrollbar-thumb:hover { background: color-mix(in srgb, var(--color-jarvis-amber) 40%, transparent); }

/* --- Panel Focus Utility --- */
.panel-focused {
  border-color: var(--color-jarvis-amber);
  box-shadow: var(--shadow-jarvis-glow-sm);
}

/* --- Reduced Motion --- */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  /* Hide scan lines and grid background entirely */
  .scan-lines, .grid-bg, [data-effect="ambient"] {
    display: none !important;
  }
}
